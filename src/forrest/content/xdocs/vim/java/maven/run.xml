<?xml version="1.0" encoding="UTF-8"?>
<!--
  Copyright (c) 2005 - 2008

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

  http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
  -->
<!DOCTYPE document PUBLIC "-//APACHE//DTD Documentation V2.0//EN"
  "http://forrest.apache.org/dtd/document-v20.dtd">
<!--
 Author: Eric Van Dewoestine
-->

<document>
  <header>
    <title>Maven Execution</title>
    <authors>
      <person name="Eric Van Dewoestine" email="ervandew@gmail.com"/>
    </authors>
  </header>
  <body>
    <anchor id="Maven"/>
    <anchor id="Mvn"/>
    <p>
      Much like the provided <a href="../ant/run.html">ant</a> execution
      functionality, eclim also provides commands for running maven 1.x or 2.x.
    </p>
    <p>
      Eclim provides the following commands:
    </p>
    <source>
      :Maven [&lt;goal&gt; ...]
      :Mvn [&lt;goal&gt; ...]
    </source>
    <p>
      which perform the following steps:
    </p>
    <ul>
      <li>
        Save any previous 'makeprg' and 'errorformat' option settings so that
        you can define your own settings for the :make command.
      </li>
      <li>
        Set 'makeprg' to execute maven or mvn with the --find option so that it
        will search for your pom file in the current directory or in a parent
        directory.
      </li>
      <li>
        Set 'errorformat' to recognize the following errors:
        <ul>
          <li>javac errors.</li>
          <li>javadoc errors.</li>
          <li>junit errors / failures.</li>
        </ul>
      </li>
      <li>
        Execute :make.
      </li>
      <li>
        Restore your previous 'makeprg' and 'errorformat' option settings.
      </li>
    </ul>

    <note>
      Both <strong>:Maven</strong> and <strong>:Mvn</strong> also supports use
      of '!' (:Maven!) just like :make does, which tells Vim not to jump to the
      first error if one exists.
    </note>

    <note>
      We recommended enabling
      <a href="../../index.html#EclimMakeLCD">g:EclimMakeLCD</a> (which is
      enabled by default) so that when running <strong>:Maven</strong> or
      <strong>Mvn</strong> you do not need to worry about what your current
      working directory is. The proper pom file will be used for the currently
      open file.<br/><br/>

      Note that <strong>:Mvn</strong> MUST have this enabled since maven 2.x no
      longer has support for the <code>--find</code> option.
    </note>

  </body>
</document>
