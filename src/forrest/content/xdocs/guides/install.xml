<?xml version="1.0" encoding="UTF-8"?>
<!--
  Copyright (c) 2005 - 2006

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->
<!DOCTYPE document PUBLIC "-//APACHE//DTD Documentation V2.0//EN"
  "http://forrest.apache.org/dtd/document-v20.dtd">
<!--
 Author: Eric Van Dewoestine
-->

<document>
  <header>
    <title>Eclim installation / upgrading guide.</title>
    <authors>
      <person name="Eric Van Dewoestine" email="ervandew@yahoo.com"/>
    </authors>
  </header>
  <body>
    <note>
      Currently the installation proceedure is fairly manual, but a graphical
      installer is in the works and will hopefully be ready by the next eclim
      release.
    </note>
    <section id="requirements">
      <title>Requirements</title>
      <p>
        Before beginning the installation, first confirm that you have met the
        following requirements.
      </p>
      <ul>
        <li>
          <a href="ext:jdk_download">Java Development Kit</a> 1.4 or greater.
        </li>
        <li>
          <a href="ext:eclipse_download">Eclipse SDK 3.2.0</a>.
        </li>
        <li>
          <a href="ext:vim_download">Vim 7.0.x</a>.<br/><br/>
          <p>
            <strong>Minimum Vim Settings</strong>: In order for eclim to
            function properly, there is a minimum set of vim options that must
            be enabled in your vimrc file (:h vimrc).
          </p>
          <ul>
            <li>
              <strong><code>set nocompatible</code></strong>
              <p>
                Execute :h 'compatible' for more info.  You can confirm that
                compatibliity is turned off by executing the following:
              </p>
              <source>
                :echo &amp;compatible
              </source>
              <p>
                Which should output '0'.
              </p>
              <br/>
            </li>
            <li>
              <strong><code>filetype plugin on</code></strong>
              <p>
                Execute :h filetype-plugin-on for more info.  You can confirm
                that file type plugins are enabled by executing the following:
              </p>
              <source>
                :filetype
              </source>
              <p>
                Which should output 'filetype detection:ON  plugin:ON
                indent:ON', showing at least 'ON' for 'detection' and 'plugin'.
              </p>
            </li>
          </ul>
        </li>
      </ul>
    </section>
    <section id="install">
      <title>Install</title>

      <section id="step1">
        <title>Step 1: Download <strong>2</strong> eclim distribution files.</title>
        <ol>
          <li>
            The first file you will need to <a href="ext:downloads">download</a>
            is the platform independent Vim plugins jar file:
            <ul>
              <li>
                <a href="ext:downloads">
                  <strong>eclim_vim_<em>version</em>.jar</strong>
                </a>
              </li>
            </ul>
          </li>
          <li>
            The second file you will need to <a href="ext:downloads">download</a>
            is the platform dependent Eclipse plugins archive:
            <ul>
              <li>
                *nix:
                <a href="ext:downloads">
                  <strong>org.eclim_<em>version</em>.tar.gz</strong>
                </a>
              </li>
              <li>
                Windows:
                <a href="ext:downloads">
                  <strong>org.eclim_<em>version</em>.zip</strong>
                </a>
              </li>
            </ul>
          </li>
        </ol>
      </section>

      <section id="step2">
        <title>Step 2: Install eclim Eclipse plugins.</title>
        <p>
          Simply open a shell and extract the eclim Eclipse plugins archive to your
          Eclipse plugins directory.
        </p>
        <p>
          *nix Example:<br/>
          <img alt="Extracting on *nix."
              src="../images/screenshots/install/linux_eclipse_plugins.png"/>
        </p>
        <p>
          Windows Example:<br/>
          <img alt="Extracting on Windows."
              src="../images/screenshots/install/windows_eclipse_plugins.png"/>
        </p>
        <p>
          Once you have the plug-in installed, before you can run the server, you
          must set the environment variable <strong>ECLIPSE_HOME</strong> to the
          location of your Eclipse installation.
        </p>
        <ul>
          <li>
            *nix: add export ECLIPSE_HOME="/usr/local/eclipse" to your .bashrc
            or equivelent for your prefered shell.
          </li>
          <li>
            Windows: Start > Setting > Control Panel > System > Advanced (tab) >
            Environment Variables.  From there add a new System or User variable
            for ECLIPSE_HOME.
          </li>
        </ul>
      </section>

      <section id="step3">
        <title>Step 3: Install eclim Vim plugins.</title>
        <p>
          Simply open a shell and extract the eclim Vim plugins jar file to one
          of the directories in your Vim runtime path.
        </p>
        <note>
          The directory to extract to depends on your platform, but you can find
          the appropriate directory by opening a Vim instance and executing:
          <br/>
          &nbsp;&nbsp;<strong>:echo &amp;rtp</strong><br/>
          This will echo a comma seperated list of directories in Vim's runtime
          path.
          <br/>
          <br/>
          On *nix platforms, you would typically be extracting to the .vim
          directory in your home folder.<br/>
          &nbsp;&nbsp;<strong>~/.vim</strong>
          <br/>
          <br/>
          On Windows platforms, you would typically be extracting to the
          vimfiles directory in your C:\Documents and Settings\Username\
          folder.<br/>
          &nbsp;&nbsp;<strong>C:\Documents and Settings\<em>Username</em>\vimfiles</strong>
          <br/>
          In some cases you might instead need to extract to vimfiles on your C
          drive.<br/>
          &nbsp;&nbsp;<strong>C:\vimfiles</strong>
        </note>
        <p>
          *nix Example:<br/>
          <img alt="Extracting on *nix."
              src="../images/screenshots/install/linux_vim_plugins.png"/>
        </p>
        <p>
          Windows Example:<br/>
          <img alt="Extracting on Windows."
              src="../images/screenshots/install/windows_vim_plugins.png"/>
        </p>
      </section>

      <section id="step4">
        <title>Step 4: Compile nailgun (non-Windows systems only).</title>
        <ul>
          <li>
            <strong>Windows Users</strong>:
            On windows there are no additional installation steps for nailgun.
          </li>
          <li>
            <strong>All Other Platforms</strong>:
            For all other platforms you will need 'gcc' and 'make' to compile
            nailgun for your system.<br/> To do so, open a command prompt and
            change directories to
            ECLIPSE_HOME/plugins/org.eclim_<em>version</em>/src/nailgun.  In
            that directory issue the command 'make'.  After that finishes you
            should have an executable named 'ng' in the same directory.  Simply
            copy or move that file to
            ECLIPSE_HOME/plugins/org.eclim_<em>version</em>/bin and you're all
            done.
            <source>
              $ cd $ECLIPSE_HOME/plugins/org.eclim_1.2.0/src/nailgun
              $ make
              $ mv ng ../../bin/
            </source>
          </li>
        </ul>
      </section>

      <section id="step5">
        <title>Step 5: Start and test eclim.</title>
        <p>
          Now that everything is installed, it is time to start up the eclim
          server and verify that it is running properly.
        </p>
        <ol>
          <li>
            The first step is to start the eclimd server.  To do so follow the
            directions found <a href="../eclimd.html#startup">here</a>.
          </li>
          <li>
            Once you have started the server you can test it by opening a Vim
            window and issuing the command,
            <a href="../vim/index.html#PingEclim">
              <strong>:PingEclim</strong>
            </a>.  The result of executing this command should be
            "<code>eclim</code> <em>version</em>" echoed to the bottom of your
            Vim window.  If however, you receive
            "<code>unable to connect to eclimd - connect: Connection refused</code>",
            or something similar, then your eclimd server is not running or
            something is preventing eclim from connecting to it.  If you receive
            this or any other errors and are unsure of what steps to take,
            please feel free to visit the <a href="ext:forums">forums</a> so
            that someone can help resolve your issue.
            <br/><br/>
            <p>
              Example of successful ping:<br/>
              <img src="../images/screenshots/ping_success.png" alt="Successful Ping"/>
            </p>
            <br/>
            <p>
              Example of failed ping:<br/>
              <img src="../images/screenshots/ping_failed.png" alt="Failed Ping"/>
            </p>
          </li>
          <li>
            Regardless of the ping result, you can also verify your vim settings
            using the command <strong>:EclimValidate</strong>.  This will check
            various settings and options and report any problems. If all is ok
            you will receive the following message:
            <source>
              Result: OK, required settings are valid.
            </source>
          </li>
        </ol>
      </section>

      <section id="whatsnext">
        <title>What's Next</title>
        <p>
          Now that you have eclim installed, the next step is to familiarize
          yourself with at least the core set of commands that eclim
          provides, all of which are found at the index of the eclim
          <a href="../vim/index.html">documentation</a>.
        </p>
      </section>

    </section>

    <section id="upgrade">
      <title>Upgrading</title>
      <p>
        To upgrade eclim
      </p>
      <ol>
        <li>
          First check all the <a href="../changes.html">release notes</a> from
          your currently installed version to the latest version, to see if
          there are any special upgrade notes that may apply to you.
          <warning>
            These special upgrade notes will be in red warning boxes like this
            one so that they are easy to identify.
          </warning>
        </li>
        <li>
          <a href="../eclimd.html#shutdown">Shutdown eclimd</a>.
        </li>
        <li>
          Delete the old org.eclim*_<em>version</em> plugins from your
          ECLIPSE_HOME/plugins directory.
        </li>
        <li>
          <a href="#step2">
            Extract the new org.eclim_<em>version</em>.tar.gz
          </a>
          (or org.eclim_<em>version</em>.zip if on windows) to your
          ECLIPSE_HOME/plugins directory.
        </li>
        <li>
          <a href="#step3">
            Extract your new eclim_vim_<em>version</em>.jar
          </a>
          file to your Vim runtimepath.
        </li>
        <li>
          If not on Windows, recompile the <a href="#step4">nailgun client</a>.
        </li>
      </ol>
    </section>
  </body>
</document>
